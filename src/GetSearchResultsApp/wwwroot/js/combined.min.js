var Utilities=function(){"use strict";function n(n){return!n||n.replace(/\s/g,"").length<1}function t(n,t,i){if(!n||!t)return n;var r=new RegExp("([?&])"+t+"=.*?(&|$)","i"),u=n.indexOf("?")!==-1?"&":"?";return n.match(r)?n.replace(r,"$1"+t+"="+i+"$2"):n+u+t+"="+i}function i(n){if(n)while(n.firstChild)n.removeChild(n.firstChild)}return{updateQueryStringParameter:function(n,i,r){return t(n,i,r)},isNullOrWhitespace:function(t){return n(t)},removeAllChildElements:function(n){return i(n)}}}(window),SearchResultApp=function(n,t){"use strict";function u(n,i){return!i||!n?n:t.updateQueryStringParameter(n,encodeURIComponent(i.name),encodeURIComponent(i.value))}function b(){var n=f.action;return n=u(n,e),n=u(n,o),n=u(n,s),n=u(n,h),c.checked&&(n=t.updateQueryStringParameter(n,encodeURIComponent(c.name),"true")),n}function i(n){t.isNullOrWhitespace(n)||l.insertAdjacentHTML("beforeend","<li>"+n+"<\/li>")}function k(){var r=!0,n=[],u;if(t.removeAllChildElements(l),t.isNullOrWhitespace(e.value)&&(r=!1,n.push("Address line required")),t.isNullOrWhitespace(o.value+s.value+h.value)&&(r=!1,n.push("More information required")),!r)for(u in n)n.hasOwnProperty(u)&&i(n[u]);return r}function w(n){var t=n&&n.errorMessages,r;if(t&&t.length)for(r in t)t.hasOwnProperty(r)&&i(t[r]);else i(y)}function d(t){var i=t&&t.searchResults;if(!i||!i.length){w(t);return}v||(v=n.compile(document.getElementById("searchResultTemplate").innerHTML));a.insertAdjacentHTML("beforeend",v(i))}function g(){var u=this,n;if(r.className+="hidden",t.removeAllChildElements(a),u.status!==200){i(y);return}if(n=JSON.parse(u.responseText),!n){i(y);return}if(/^true$/i.test(n.limitWarning)&&alert("Approaching limit, slow down"),!/^true$/i.test(n.success)){w(n);return}d(n)}function nt(){if(k()){r.className=r.className.replace(/^hidden$/,"");var n=new XMLHttpRequest;n.open("GET",b());n.onload=g.bind(n);n.send()}}function tt(){f=document.getElementById("searchForm");p=document.getElementById("searchButton");e=document.getElementById("addressLineText");o=document.getElementById("cityText");s=document.getElementById("stateText");h=document.getElementById("zipCodeText");c=document.getElementById("estimateRentCheckbox");r=document.getElementById("spinner");a=document.getElementById("searchResultContainer");l=document.querySelector("#validationMessages ul")}function it(){tt();f.addEventListener("submit",function(n){n.preventDefault()});p.addEventListener("click",nt)}var f,p,e,o,s,h,c,l,r,a,v,y="Error occured. Please try again later";return{initialize:function(){return it()}}}(Handlebars,Utilities,window);